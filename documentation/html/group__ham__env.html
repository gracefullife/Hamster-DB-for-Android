<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>hamsterdb Embedded Database: hamsterdb Environment Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>hamsterdb Environment Functions</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
HAM_CALLCONV&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga033111f8bf983b5d6275ce84dce3d841">ham_env_new</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> **env)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
HAM_CALLCONV&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga0a04486b89b7db739ccde814014c1079">ham_env_delete</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
HAM_CALLCONV&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga3ef0835f848c8f35a3da6b97ec1db224">ham_env_create</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, const char *filename, <a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a> flags, <a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a> mode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
HAM_CALLCONV&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga4316524c094e12d84f8be7456d2101a8">ham_env_create_ex</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, const char *filename, <a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a> flags, <a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a> mode, const <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *param)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
HAM_CALLCONV&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga597d46a778206caf8e8bf9d16b834e9e">ham_env_open</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, const char *filename, <a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a> flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
HAM_CALLCONV&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga4dbe3a84324f142a7c2344c33314d9b5">ham_env_open_ex</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, const char *filename, <a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a> flags, const <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *param)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
HAM_CALLCONV&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga1da6fd9eee42c7d0c6e4a23dd7e5c059">ham_env_get_parameters</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *param)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
HAM_CALLCONV&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga5934b6a7c9457afd0ff2c19dd9c6db15">ham_env_create_db</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, <a class="el" href="hamsterdb_8h.html#a6bc485e4975cd65160c0e8ec86a9b143">ham_db_t</a> *db, <a class="el" href="types_8h.html#a5364c7dfd0c5508a81ad68f6e6eeac2c">ham_u16_t</a> name, <a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a> flags, const <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *params)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
HAM_CALLCONV&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga5fc90a1a4c2e4a69d737c804b5159931">ham_env_open_db</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, <a class="el" href="hamsterdb_8h.html#a6bc485e4975cd65160c0e8ec86a9b143">ham_db_t</a> *db, <a class="el" href="types_8h.html#a5364c7dfd0c5508a81ad68f6e6eeac2c">ham_u16_t</a> name, <a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a> flags, const <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *params)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
HAM_CALLCONV&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga07a3749e3dfa88138c3056e5052bb96a">ham_env_rename_db</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, <a class="el" href="types_8h.html#a5364c7dfd0c5508a81ad68f6e6eeac2c">ham_u16_t</a> oldname, <a class="el" href="types_8h.html#a5364c7dfd0c5508a81ad68f6e6eeac2c">ham_u16_t</a> newname, <a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a> flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
HAM_CALLCONV&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga4ceb71003291e9eabe2df7140c89610c">ham_env_erase_db</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, <a class="el" href="types_8h.html#a5364c7dfd0c5508a81ad68f6e6eeac2c">ham_u16_t</a> name, <a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a> flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
HAM_CALLCONV&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga45a4d0ce402d5ed49006da470b31baf6">ham_env_flush</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, <a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a> flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
HAM_CALLCONV&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga6c1cee9a56718cb627460ac305c7cf4b">ham_env_enable_encryption</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, <a class="el" href="types_8h.html#a6bb5d3ba8dc25de12468d293bf0bc93e">ham_u8_t</a> key[16], <a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a> flags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
HAM_CALLCONV&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#ga8b6e5d0611cb6aba8607ff0824441e8d">ham_env_get_database_names</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, <a class="el" href="types_8h.html#a5364c7dfd0c5508a81ad68f6e6eeac2c">ham_u16_t</a> *names, <a class="el" href="types_8h.html#afa6686f7ad596810df811d489a6d5733">ham_size_t</a> *count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> <br class="typebreak"/>
HAM_CALLCONV&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ham__env.html#gaec7ee5ca832fa06438b4806ae5e096c4">ham_env_close</a> (<a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *env, <a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a> flags)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gaec7ee5ca832fa06438b4806ae5e096c4"></a><!-- doxytag: member="hamsterdb.h::ham_env_close" ref="gaec7ee5ca832fa06438b4806ae5e096c4" args="(ham_env_t *env, ham_u32_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> HAM_CALLCONV ham_env_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Closes the Database Environment</p>
<p>This function closes the Database Environment. It does not free the memory resources allocated in the <em>env</em> handle - use <a class="el" href="group__ham__env.html#ga0a04486b89b7db739ccde814014c1079">ham_env_delete</a> to free <em>env</em>.</p>
<p>If the flag <a class="el" href="group__ham__database.html#ga31e72b79e5c7e5ade99fec03427d5d8c">HAM_AUTO_CLEANUP</a> is specified, hamsterdb automatically calls <a class="el" href="group__ham__database.html#gac0e1e492c2b36e2ae0e87d0c0ff6e04e">ham_close</a> with flag <a class="el" href="group__ham__database.html#ga31e72b79e5c7e5ade99fec03427d5d8c">HAM_AUTO_CLEANUP</a> on all open Databases (which closes all open Databases and their Cursors). This invalidates the ham_db_t and ham_cursor_t handles!</p>
<p>If the flag is not specified, the application must close all Database handles with <a class="el" href="group__ham__database.html#gac0e1e492c2b36e2ae0e87d0c0ff6e04e">ham_close</a> to prevent memory leaks.</p>
<p>This function also aborts all Transactions which were not yet committed, and therefore renders all Transaction handles invalid. If the flag <a class="el" href="group__ham__database.html#ga59b3249f35ef7d6a27c37fe383ca5201">HAM_TXN_AUTO_COMMIT</a> is specified, all Transactions will be committed.</p>
<p>This function removes all file-level filters installed with <a class="el" href="group__ham__extended__api.html#gad660a36283848a3719b23f8961e01e2e">ham_env_add_file_filter</a> (and hence also, implicitly, the filter installed by <a class="el" href="group__ham__env.html#ga6c1cee9a56718cb627460ac305c7cf4b">ham_env_enable_encryption</a>).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>A valid Environment handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Optional flags for closing the handle. Possible flags are: </p>
<ul>
<li>
<a class="el" href="group__ham__database.html#ga31e72b79e5c7e5ade99fec03427d5d8c">HAM_AUTO_CLEANUP</a>. Calls <a class="el" href="group__ham__database.html#gac0e1e492c2b36e2ae0e87d0c0ff6e04e">ham_close</a> with the flag <a class="el" href="group__ham__database.html#ga31e72b79e5c7e5ade99fec03427d5d8c">HAM_AUTO_CLEANUP</a> on every open Database </li>
<li>
<a class="el" href="group__ham__database.html#ga59b3249f35ef7d6a27c37fe383ca5201">HAM_TXN_AUTO_COMMIT</a>. Automatically commit all open Transactions </li>
<li>
<a class="el" href="group__ham__database.html#gaddca00550f7bac79eb6f1f7c02f04f5c">HAM_TXN_AUTO_ABORT</a>. Automatically abort all open Transactions; this is the default behaviour </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if <em>env</em> is NULL </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00723">ham::env::close()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3ef0835f848c8f35a3da6b97ec1db224"></a><!-- doxytag: member="hamsterdb.h::ham_env_create" ref="ga3ef0835f848c8f35a3da6b97ec1db224" args="(ham_env_t *env, const char *filename, ham_u32_t flags, ham_u32_t mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> HAM_CALLCONV ham_env_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a Database Environment</p>
<p>A Database Environment is a collection of Databases, which are all stored in one physical file (or in-memory). Per default, up to 16 Databases can be stored in one file (see <a class="el" href="group__ham__env.html#ga4316524c094e12d84f8be7456d2101a8">ham_env_create_ex</a> on how to store even more Databases).</p>
<p>Each Database is identified by a positive 16bit value (except 0 and values at or above 0xf000). Databases in an Environment can be created with <a class="el" href="group__ham__env.html#ga5934b6a7c9457afd0ff2c19dd9c6db15">ham_env_create_db</a> or opened with <a class="el" href="group__ham__env.html#ga5fc90a1a4c2e4a69d737c804b5159931">ham_env_open_db</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>A valid Environment handle, which was created with <a class="el" href="group__ham__env.html#ga033111f8bf983b5d6275ce84dce3d841">ham_env_new</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>The filename of the Environment file. If the file already exists, it is overwritten. Can be NULL if an In-Memory Environment is created. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Optional flags for opening the Environment, combined with bitwise OR. For allowed flags, see <a class="el" href="group__ham__env.html#ga4316524c094e12d84f8be7456d2101a8">ham_env_create_ex</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>File access rights for the new file. This is the <em>mode</em> parameter for creat(2). Ignored on Microsoft Windows.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or an invalid combination of flags was specified </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gab3c1003cb681477b768c00d93e51a398">HAM_IO_ERROR</a> if the file could not be opened or reading/writing failed </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gac29fff6dc372d4df81aa6d954fa8003f">HAM_INV_FILE_VERSION</a> if the Environment version is not compatible with the library version </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gae88e8c20500172e207af4dab2f73a189">HAM_OUT_OF_MEMORY</a> if memory could not be allocated </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga8cc1290a674002e12458e354ecd1ffc9">HAM_WOULD_BLOCK</a> if another process has locked the file </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga85b6e006baaff5a5e333d519408c04da">HAM_ENVIRONMENT_ALREADY_OPEN</a> if <em>env</em> is already in use</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__ham__env.html#ga4316524c094e12d84f8be7456d2101a8">ham_env_create_ex</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga5934b6a7c9457afd0ff2c19dd9c6db15"></a><!-- doxytag: member="hamsterdb.h::ham_env_create_db" ref="ga5934b6a7c9457afd0ff2c19dd9c6db15" args="(ham_env_t *env, ham_db_t *db, ham_u16_t name, ham_u32_t flags, const ham_parameter_t *params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> HAM_CALLCONV ham_env_create_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a6bc485e4975cd65160c0e8ec86a9b143">ham_db_t</a> *&nbsp;</td>
          <td class="paramname"> <em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5364c7dfd0c5508a81ad68f6e6eeac2c">ham_u16_t</a>&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a new Database in a Database Environment</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>A valid Environment handle. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>db</em>&nbsp;</td><td>A valid Database handle, which will point to the created Database. To close the handle, use <a class="el" href="group__ham__database.html#gac0e1e492c2b36e2ae0e87d0c0ff6e04e">ham_close</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>The name of the Database. If a Database with this name already exists, the function will fail with <a class="el" href="group__ham__status__codes.html#ga9b8f81eb7c034b2206753a7063e48032">HAM_DATABASE_ALREADY_EXISTS</a>. Database names from 0xf000 to 0xffff and 0 are reserved. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Optional flags for creating the Database, combined with bitwise OR. Possible flags are: </p>
<ul>
<li>
<a class="el" href="group__ham__database.html#ga876d5304182be14c1b26789aababef29">HAM_USE_BTREE</a>  Use a B+Tree for the index structure. Currently enabled by default, but future releases of hamsterdb will offer additional index structures, like hash tables. </li>
<li>
<a class="el" href="group__ham__database.html#gaf903dcaaf31f27175ea868672af20af1">HAM_DISABLE_VAR_KEYLEN</a>  Do not allow the use of variable length keys. Inserting a key, which is larger than the B+Tree index key size, returns <a class="el" href="group__ham__status__codes.html#ga36414adb70d7640f37b52cbb357a1ba9">HAM_INV_KEYSIZE</a>. </li>
<li>
<a class="el" href="group__ham__database.html#ga7b06edf8a7efe4055bcc45326879ea0f">HAM_ENABLE_DUPLICATES</a>  Enable duplicate keys for this Database. By default, duplicate keys are disabled. </li>
<li>
<a class="el" href="group__ham__database.html#ga4c650048946c77fcce2b7d5f495ba25d">HAM_SORT_DUPLICATES</a>  Sort duplicate keys for this Database. Only allowed in combination with <a class="el" href="group__ham__database.html#ga7b06edf8a7efe4055bcc45326879ea0f">HAM_ENABLE_DUPLICATES</a>. A compare function can be set with <a class="el" href="group__ham__database.html#ga7074b9b0fa6366c2156b82659e05665f">ham_set_duplicate_compare_func</a>. This flag is not persistent. </li>
<li>
<a class="el" href="group__ham__database.html#gaf3dcb4e380687ff4c3a2ed59bc688bb2">HAM_RECORD_NUMBER</a>  Creates an "auto-increment" Database. Keys in Record Number Databases are automatically assigned an incrementing 64bit value. If key-&gt;data is not NULL (and key-&gt;flags is <a class="el" href="hamsterdb_8h.html#a1f80d7f9db705552f363ab35d4ab4c8a">HAM_KEY_USER_ALLOC</a> and key-&gt;size is 8), the value of the current key is returned in <em>key</em> (a host-endian 64bit number of type ham_u64_t). If key-data is NULL and key-&gt;size is 0, key-&gt;data is temporarily allocated by hamsterdb. </li>
</ul>
</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>params</em>&nbsp;</td><td>An array of <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> structures. The following parameters are available: </p>
<ul>
<li>
<a class="el" href="group__ham__database.html#ga1885d6efa9c486d48420c289c6e20372">HAM_PARAM_KEYSIZE</a>  The size of the keys in the B+Tree index. The default size is 21 bytes. </li>
<li>
<a class="el" href="group__ham__database.html#gac06e57831c21af6110a04e8d9d7bd167">HAM_PARAM_DATA_ACCESS_MODE</a>  Gives a hint regarding data access patterns. The default setting optimizes hamsterdb for random read/write access (<a class="el" href="group__ham__data__access__modes.html#ga14500a3f83a689110ec9e3e719b5b37f">HAM_DAM_RANDOM_WRITE</a>). Use <a class="el" href="group__ham__data__access__modes.html#gad759a1d13a46f8297e4f868ac85eb02c">HAM_DAM_SEQUENTIAL_INSERT</a> for sequential inserts (this is automatically set for record number Databases). Data Access Mode hints can be set for individual Databases, too (see also <a class="el" href="group__ham__database.html#ga24245a31681e5987a0d71c04ff953ea3">ham_create_ex</a>) but are applied globally to all Databases within a single Environment. For more information about available DAM (Data Access Mode) flags, see <a class="el" href="group__ham__data__access__modes.html">hamsterdb Data Access Mode Codes</a>. The DAM is not persistent. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or an invalid combination of flags was specified </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga9b8f81eb7c034b2206753a7063e48032">HAM_DATABASE_ALREADY_EXISTS</a> if a Database with this <em>name</em> already exists in this Environment </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gae88e8c20500172e207af4dab2f73a189">HAM_OUT_OF_MEMORY</a> if memory could not be allocated </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga0be4d905b04c8fdbf76242aaee646a3a">HAM_LIMITS_REACHED</a> if the maximum number of Databases per Environment was already created </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga2d404705921dd4e70c975cab78db8304">HAM_DATABASE_ALREADY_OPEN</a> if <em>db</em> is already in use </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00671">ham::env::create_db()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4316524c094e12d84f8be7456d2101a8"></a><!-- doxytag: member="hamsterdb.h::ham_env_create_ex" ref="ga4316524c094e12d84f8be7456d2101a8" args="(ham_env_t *env, const char *filename, ham_u32_t flags, ham_u32_t mode, const ham_parameter_t *param)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> HAM_CALLCONV ham_env_create_ex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *&nbsp;</td>
          <td class="paramname"> <em>param</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a Database Environment - extended version</p>
<p>A Database Environment is a collection of Databases, which are all stored in one physical file (or in-memory). Per default, up to 16 Databases can be stored in one file, but this setting can be overwritten by specifying the parameter <a class="el" href="group__ham__database.html#ga1567df4a8e0b9adfd8bdd1fe80ad6418">HAM_PARAM_MAX_ENV_DATABASES</a>.</p>
<p>Each Database is identified by a positive 16bit value (except 0 and values at or above 0xf000). Databases in an Environment can be created with <a class="el" href="group__ham__env.html#ga5934b6a7c9457afd0ff2c19dd9c6db15">ham_env_create_db</a> or opened with <a class="el" href="group__ham__env.html#ga5fc90a1a4c2e4a69d737c804b5159931">ham_env_open_db</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>A valid Environment handle, which was created with <a class="el" href="group__ham__env.html#ga033111f8bf983b5d6275ce84dce3d841">ham_env_new</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>The filename of the Environment file. If the file already exists, it is overwritten. Can be NULL for an In-Memory Environment. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Optional flags for opening the Environment, combined with bitwise OR. Possible flags are: </p>
<ul>
<li>
<a class="el" href="group__ham__database.html#ga02a9ac9a6dc9f157a6fd32d93a8c022a">HAM_WRITE_THROUGH</a> Immediately write modified pages to the disk. This slows down all Database operations, but may save the Database integrity in case of a system crash. </li>
<li>
<a class="el" href="group__ham__database.html#gad62bc11ae5fad7a657a99c6eb743a6c1">HAM_IN_MEMORY_DB</a> Creates an In-Memory Environment. No file will be created, and the Database contents are lost after the Environment is closed. The <em>filename</em> parameter can be NULL. Do <b>NOT</b> use in combination with <a class="el" href="group__ham__database.html#gad7afc7436143de8387514161748e1d90">HAM_CACHE_STRICT</a> and do <b>NOT</b> specify <em>cachesize</em> other than 0. </li>
<li>
<a class="el" href="group__ham__database.html#ga5413f94fa215309f094dc8ce04f2cab0">HAM_DISABLE_MMAP</a> Do not use memory mapped files for I/O. By default, hamsterdb checks if it can use mmap, since mmap is faster than read/write. For performance reasons, this flag should not be used. </li>
<li>
<a class="el" href="group__ham__database.html#gad7afc7436143de8387514161748e1d90">HAM_CACHE_STRICT</a> Do not allow the cache to grow larger than <em>cachesize</em>. If a Database operation needs to resize the cache, it will return <a class="el" href="group__ham__status__codes.html#ga8e8c61042670c891fbe7d169d4011d11">HAM_CACHE_FULL</a>. If the flag is not set, the cache is allowed to allocate more pages than the maximum cache size, but only if it's necessary and only for a short time. </li>
<li>
<a class="el" href="group__ham__database.html#ga15097f5df4e9671792fb65eac9d05b70">HAM_CACHE_UNLIMITED</a> Do not limit the cache. Nearly as fast as an In-Memory Database. Not allowed in combination with <a class="el" href="group__ham__database.html#gad7afc7436143de8387514161748e1d90">HAM_CACHE_STRICT</a> or a limited cache size. </li>
<li>
<a class="el" href="group__ham__database.html#gac4e2c3cc0682d194cb3053627cb6e31e">HAM_DISABLE_FREELIST_FLUSH</a> This flag is deprecated. </li>
<li>
<a class="el" href="group__ham__database.html#ga5fa27327c0bac4ae8c6f9a604d2dfa67">HAM_LOCK_EXCLUSIVE</a> Place an exclusive lock on the file. Only one process may hold an exclusive lock for a given file at a given time. Deprecated - this is now the default </li>
<li>
<a class="el" href="group__ham__database.html#ga6ed0878fb06aad97e7c76f23c687d528">HAM_ENABLE_RECOVERY</a> Enables logging/recovery for this Database. Not allowed in combination with <a class="el" href="group__ham__database.html#gad62bc11ae5fad7a657a99c6eb743a6c1">HAM_IN_MEMORY_DB</a>, <a class="el" href="group__ham__database.html#gac4e2c3cc0682d194cb3053627cb6e31e">HAM_DISABLE_FREELIST_FLUSH</a> and <a class="el" href="group__ham__database.html#ga02a9ac9a6dc9f157a6fd32d93a8c022a">HAM_WRITE_THROUGH</a>. </li>
<li>
<a class="el" href="group__ham__database.html#ga39f7e995afb8789c05241102d3948a12">HAM_ENABLE_TRANSACTIONS</a> Enables Transactions for this Database. <b>Remark</b> Transactions were introduced in hamsterdb 1.0.4, but with certain limitations. Please read the README file for details.<br/>
 This flag implies <a class="el" href="group__ham__database.html#ga6ed0878fb06aad97e7c76f23c687d528">HAM_ENABLE_RECOVERY</a>. </li>
</ul>
</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>File access rights for the new file. This is the <em>mode</em> parameter for creat(2). Ignored on Microsoft Windows. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>param</em>&nbsp;</td><td>An array of <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> structures. The following parameters are available: </p>
<ul>
<li>
<a class="el" href="group__ham__database.html#ga8d411f911a34c85d5db211d0e2e3bca9">HAM_PARAM_CACHESIZE</a> The size of the Database cache, in bytes. The default size is defined in src/config.h as <em>HAM_DEFAULT_CACHESIZE</em> - usually 2MB </li>
<li>
<a class="el" href="group__ham__database.html#ga4ce60c924e2f8a45d4afb5b987cc60bd">HAM_PARAM_PAGESIZE</a> The size of a file page, in bytes. It is recommended not to change the default size. The default size depends on hardware and operating system. Page sizes must be 1024 or a multiple of 2048. </li>
<li>
<a class="el" href="group__ham__database.html#ga1567df4a8e0b9adfd8bdd1fe80ad6418">HAM_PARAM_MAX_ENV_DATABASES</a> The number of maximum Databases in this Environment; default value: 16. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or an invalid combination of flags or parameters was specified </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if the value for <a class="el" href="group__ham__database.html#ga1567df4a8e0b9adfd8bdd1fe80ad6418">HAM_PARAM_MAX_ENV_DATABASES</a> is too high (either decrease it or increase the page size) </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gab3c1003cb681477b768c00d93e51a398">HAM_IO_ERROR</a> if the file could not be opened or reading/writing failed </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gac29fff6dc372d4df81aa6d954fa8003f">HAM_INV_FILE_VERSION</a> if the Environment version is not compatible with the library version </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gae88e8c20500172e207af4dab2f73a189">HAM_OUT_OF_MEMORY</a> if memory could not be allocated </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga3f7c1a5c59403a048e5dc92de2a3534e">HAM_INV_PAGESIZE</a> if <em>pagesize</em> is not 1024 or a multiple of 2048 </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga36414adb70d7640f37b52cbb357a1ba9">HAM_INV_KEYSIZE</a> if <em>keysize</em> is too large (at least 4 keys must fit in a page) </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga8cc1290a674002e12458e354ecd1ffc9">HAM_WOULD_BLOCK</a> if another process has locked the file </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga85b6e006baaff5a5e333d519408c04da">HAM_ENVIRONMENT_ALREADY_OPEN</a> if <em>env</em> is already in use</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__ham__database.html#ga24245a31681e5987a0d71c04ff953ea3">ham_create_ex</a> </dd>
<dd>
<a class="el" href="group__ham__env.html#gaec7ee5ca832fa06438b4806ae5e096c4">ham_env_close</a> </dd>
<dd>
<a class="el" href="group__ham__env.html#ga4dbe3a84324f142a7c2344c33314d9b5">ham_env_open_ex</a> </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00643">ham::env::create()</a>.</p>

</div>
</div>
<a class="anchor" id="ga0a04486b89b7db739ccde814014c1079"></a><!-- doxytag: member="hamsterdb.h::ham_env_delete" ref="ga0a04486b89b7db739ccde814014c1079" args="(ham_env_t *env)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> HAM_CALLCONV ham_env_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Frees a ham_env_t handle</p>
<p>Frees the ham_env_t structure, but does not close the Environment. Call this function <b>AFTER</b> you have closed the Environment using <a class="el" href="group__ham__env.html#gaec7ee5ca832fa06438b4806ae5e096c4">ham_env_close</a>, or you will lose your data!</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>A valid Environment handle</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>This function always returns <a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00723">ham::env::close()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6c1cee9a56718cb627460ac305c7cf4b"></a><!-- doxytag: member="hamsterdb.h::ham_env_enable_encryption" ref="ga6c1cee9a56718cb627460ac305c7cf4b" args="(ham_env_t *env, ham_u8_t key[16], ham_u32_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> HAM_CALLCONV ham_env_enable_encryption </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a6bb5d3ba8dc25de12468d293bf0bc93e">ham_u8_t</a>&nbsp;</td>
          <td class="paramname"> <em>key</em>[16], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Enables AES encryption</p>
<p>This function enables AES encryption for every Database in the Environment. The AES key is cached in the Environment handle. The AES encryption/decryption is only active when file chunks are written to disk/read from disk; the cached pages in RAM are decrypted. Please read the FAQ for security relevant notes.</p>
<p>The encryption has no effect on In-Memory Environments, but the function will return <a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a>.</p>
<p>Log files and the header page of the Database are not encrypted.</p>
<p>The encryption will be active till <a class="el" href="group__ham__env.html#gaec7ee5ca832fa06438b4806ae5e096c4">ham_env_close</a> is called. If the Environment handle is reused after calling <a class="el" href="group__ham__env.html#gaec7ee5ca832fa06438b4806ae5e096c4">ham_env_close</a>, the encryption is no longer active. <a class="el" href="group__ham__env.html#ga6c1cee9a56718cb627460ac305c7cf4b">ham_env_enable_encryption</a> should be called immediately <b>after</b> <a class="el" href="group__ham__env.html#ga3ef0835f848c8f35a3da6b97ec1db224">ham_env_create</a>[_ex] or <a class="el" href="group__ham__env.html#ga597d46a778206caf8e8bf9d16b834e9e">ham_env_open</a>[_ex].</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>A valid Environment handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>A 128bit AES key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Optional flags for encrypting; unused, set to 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if one of the parameters is NULL </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga552391766433a0a5a746bb4918660bd3">HAM_ALREADY_INITIALIZED</a> if this function was called AFTER <a class="el" href="group__ham__env.html#ga5fc90a1a4c2e4a69d737c804b5159931">ham_env_open_db</a> or <a class="el" href="group__ham__env.html#ga5934b6a7c9457afd0ff2c19dd9c6db15">ham_env_create_db</a> </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gab20a8f3c716ed1c89f0e428e23ae818d">HAM_NOT_IMPLEMENTED</a> if hamsterdb was compiled without support for AES encryption </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga7447269b5cc1c974a6e659fadca6c7cb">HAM_ACCESS_DENIED</a> if the key (= password) was wrong </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga552391766433a0a5a746bb4918660bd3">HAM_ALREADY_INITIALIZED</a> if encryption is already enabled for this Environment </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00743">ham::env::enable_encryption()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4ceb71003291e9eabe2df7140c89610c"></a><!-- doxytag: member="hamsterdb.h::ham_env_erase_db" ref="ga4ceb71003291e9eabe2df7140c89610c" args="(ham_env_t *env, ham_u16_t name, ham_u32_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> HAM_CALLCONV ham_env_erase_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5364c7dfd0c5508a81ad68f6e6eeac2c">ham_u16_t</a>&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Deletes a Database from an Environment</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>A valid Environment handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>The name of the Database to delete. If a Database with this name does not exist, the function will fail with <a class="el" href="group__ham__status__codes.html#ga9148169c84a2c5d2a918e8b52d4d7b96">HAM_DATABASE_NOT_FOUND</a>. If the Database was already opened, the function will fail with <a class="el" href="group__ham__status__codes.html#ga2d404705921dd4e70c975cab78db8304">HAM_DATABASE_ALREADY_OPEN</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Optional flags for deleting the Database; unused, set to 0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or if the new Database name is reserved </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga9148169c84a2c5d2a918e8b52d4d7b96">HAM_DATABASE_NOT_FOUND</a> if a Database with this <em>name</em> does not exist </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga2d404705921dd4e70c975cab78db8304">HAM_DATABASE_ALREADY_OPEN</a> if a Database with this name is still open </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00714">ham::env::erase_db()</a>.</p>

</div>
</div>
<a class="anchor" id="ga45a4d0ce402d5ed49006da470b31baf6"></a><!-- doxytag: member="hamsterdb.h::ham_env_flush" ref="ga45a4d0ce402d5ed49006da470b31baf6" args="(ham_env_t *env, ham_u32_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> HAM_CALLCONV ham_env_flush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Flushes the Environment</p>
<p>This function flushes the Environment caches and writes the whole file to disk. All Databases of this Environment are flushed as well.</p>
<p>Since In-Memory Databases do not have a file on disk, the function will have no effect and will return <a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>A valid Environment handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Optional flags for flushing; unused, set to 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if <em>db</em> is NULL </dd></dl>

</div>
</div>
<a class="anchor" id="ga8b6e5d0611cb6aba8607ff0824441e8d"></a><!-- doxytag: member="hamsterdb.h::ham_env_get_database_names" ref="ga8b6e5d0611cb6aba8607ff0824441e8d" args="(ham_env_t *env, ham_u16_t *names, ham_size_t *count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> HAM_CALLCONV ham_env_get_database_names </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5364c7dfd0c5508a81ad68f6e6eeac2c">ham_u16_t</a> *&nbsp;</td>
          <td class="paramname"> <em>names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#afa6686f7ad596810df811d489a6d5733">ham_size_t</a> *&nbsp;</td>
          <td class="paramname"> <em>count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the names of all Databases in an Environment</p>
<p>This function returns the names of all Databases and the number of Databases in an Environment.</p>
<p>The memory for <em>names</em> must be allocated by the user. <em>count</em> must be the size of <em>names</em> when calling the function, and will be the number of Databases when the function returns. The function returns <a class="el" href="group__ham__status__codes.html#ga0be4d905b04c8fdbf76242aaee646a3a">HAM_LIMITS_REACHED</a> if <em>names</em> is not big enough; in this case, the caller should resize the array and call the function again.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>A valid Environment handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>names</em>&nbsp;</td><td>Pointer to an array for the Database names </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>count</em>&nbsp;</td><td>Pointer to the size of the array; will be used to store the number of Databases when the function returns.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if <em>env</em>, <em>names</em> or <em>count</em> is NULL </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga0be4d905b04c8fdbf76242aaee646a3a">HAM_LIMITS_REACHED</a> if <em>names</em> is not large enough to hold all Database names </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00750">ham::env::get_database_names()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1da6fd9eee42c7d0c6e4a23dd7e5c059"></a><!-- doxytag: member="hamsterdb.h::ham_env_get_parameters" ref="ga1da6fd9eee42c7d0c6e4a23dd7e5c059" args="(ham_env_t *env, ham_parameter_t *param)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> HAM_CALLCONV ham_env_get_parameters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *&nbsp;</td>
          <td class="paramname"> <em>param</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Retrieve the current value for a given Environment setting</p>
<p>Only those values requested by the parameter array will be stored. If the <em>env</em> handle is NULL, the default parameters will be returned.</p>
<p>The following parameters are supported: </p>
<ul>
<li>
HAM_PARAM_CACHESIZE returns the cache size </li>
<li>
HAM_PARAM_PAGESIZE returns the page size </li>
<li>
HAM_PARAM_MAX_ENV_DATABASES returns the max. number of Databases of this Database's Environment </li>
<li>
HAM_PARAM_GET_FLAGS returns the flags which were used to open or create this Database </li>
<li>
HAM_PARAM_GET_FILEMODE returns the <em>mode</em> parameter which was specified when creating this Database </li>
<li>
HAM_PARAM_GET_FILENAME returns the filename (the <em>value</em> of this parameter is a const char * pointer casted to a ham_u64_t variable) </li>
<li>
HAM_PARAM_GET_STATISTICS returns a <a class="el" href="structham__statistics__t.html">ham_statistics_t</a> structure with the current statistics </li>
</ul>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>A valid Environment handle; can be NULL </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>param</em>&nbsp;</td><td>An array of <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> structures</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or <em>param</em> is NULL </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00736">ham::env::get_parameters()</a>.</p>

</div>
</div>
<a class="anchor" id="ga033111f8bf983b5d6275ce84dce3d841"></a><!-- doxytag: member="hamsterdb.h::ham_env_new" ref="ga033111f8bf983b5d6275ce84dce3d841" args="(ham_env_t **env)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> HAM_CALLCONV ham_env_new </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> **&nbsp;</td>
          <td class="paramname"> <em>env</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Allocates a ham_env_t handle</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>Pointer to the pointer which is allocated</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gae88e8c20500172e207af4dab2f73a189">HAM_OUT_OF_MEMORY</a> if memory allocation failed </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00643">ham::env::create()</a>, and <a class="el" href="hamsterdb_8hpp_source.html#l00657">ham::env::open()</a>.</p>

</div>
</div>
<a class="anchor" id="ga597d46a778206caf8e8bf9d16b834e9e"></a><!-- doxytag: member="hamsterdb.h::ham_env_open" ref="ga597d46a778206caf8e8bf9d16b834e9e" args="(ham_env_t *env, const char *filename, ham_u32_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> HAM_CALLCONV ham_env_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Opens an existing Database Environment</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>A valid Environment handle, which was created with <a class="el" href="group__ham__env.html#ga033111f8bf983b5d6275ce84dce3d841">ham_env_new</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>The filename of the Environment file </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Optional flags for opening the Environment, combined with bitwise OR. See the documentation of <a class="el" href="group__ham__env.html#ga4dbe3a84324f142a7c2344c33314d9b5">ham_env_open_ex</a> for the allowed flags.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or an invalid combination of flags was specified </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga101453daaf4f6ed5de0bedec7bb490a0">HAM_FILE_NOT_FOUND</a> if the file does not exist </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gab3c1003cb681477b768c00d93e51a398">HAM_IO_ERROR</a> if the file could not be opened or reading failed </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gac29fff6dc372d4df81aa6d954fa8003f">HAM_INV_FILE_VERSION</a> if the Environment version is not compatible with the library version </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gae88e8c20500172e207af4dab2f73a189">HAM_OUT_OF_MEMORY</a> if memory could not be allocated </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga8cc1290a674002e12458e354ecd1ffc9">HAM_WOULD_BLOCK</a> if another process has locked the file </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga85b6e006baaff5a5e333d519408c04da">HAM_ENVIRONMENT_ALREADY_OPEN</a> if <em>env</em> is already in use </dd></dl>

</div>
</div>
<a class="anchor" id="ga5fc90a1a4c2e4a69d737c804b5159931"></a><!-- doxytag: member="hamsterdb.h::ham_env_open_db" ref="ga5fc90a1a4c2e4a69d737c804b5159931" args="(ham_env_t *env, ham_db_t *db, ham_u16_t name, ham_u32_t flags, const ham_parameter_t *params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> HAM_CALLCONV ham_env_open_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a6bc485e4975cd65160c0e8ec86a9b143">ham_db_t</a> *&nbsp;</td>
          <td class="paramname"> <em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5364c7dfd0c5508a81ad68f6e6eeac2c">ham_u16_t</a>&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Opens a Database in a Database Environment</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>A valid Environment handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>db</em>&nbsp;</td><td>A valid Database handle, which will point to the opened Database. To close the handle, use </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__ham__database.html#gac0e1e492c2b36e2ae0e87d0c0ff6e04e">ham_close</a>. </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>The name of the Database. If a Database with this name does not exist, the function will fail with <a class="el" href="group__ham__status__codes.html#ga9148169c84a2c5d2a918e8b52d4d7b96">HAM_DATABASE_NOT_FOUND</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Optional flags for opening the Database, combined with bitwise OR. Possible flags are: </p>
<ul>
<li>
<a class="el" href="group__ham__database.html#gaf903dcaaf31f27175ea868672af20af1">HAM_DISABLE_VAR_KEYLEN</a>  Do not allow the use of variable length keys. Inserting a key, which is larger than the B+Tree index key size, returns <a class="el" href="group__ham__status__codes.html#ga36414adb70d7640f37b52cbb357a1ba9">HAM_INV_KEYSIZE</a>. </li>
<li>
<a class="el" href="group__ham__database.html#ga4c650048946c77fcce2b7d5f495ba25d">HAM_SORT_DUPLICATES</a>  Sort duplicate keys for this Database. Only allowed if the Database was created with the flag <a class="el" href="group__ham__database.html#ga7b06edf8a7efe4055bcc45326879ea0f">HAM_ENABLE_DUPLICATES</a>. A compare function can be set with <a class="el" href="group__ham__database.html#ga7074b9b0fa6366c2156b82659e05665f">ham_set_duplicate_compare_func</a>. This flag is not persistent. </li>
</ul>
</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>params</em>&nbsp;</td><td>An array of <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> structures. The following parameters are available: </p>
<ul>
<li>
<a class="el" href="group__ham__database.html#gac06e57831c21af6110a04e8d9d7bd167">HAM_PARAM_DATA_ACCESS_MODE</a>  Gives a hint regarding data access patterns. The default setting optimizes hamsterdb for random read/write access (<a class="el" href="group__ham__data__access__modes.html#ga14500a3f83a689110ec9e3e719b5b37f">HAM_DAM_RANDOM_WRITE</a>). Use <a class="el" href="group__ham__data__access__modes.html#gad759a1d13a46f8297e4f868ac85eb02c">HAM_DAM_SEQUENTIAL_INSERT</a> for sequential inserts (this is automatically set for record number Databases). Data Access Mode hints can be set for individual Databases, too (see also <a class="el" href="group__ham__database.html#ga24245a31681e5987a0d71c04ff953ea3">ham_create_ex</a>) but are applied globally to all Databases within a single Environment. For more information about available DAM (Data Access Mode) flags, see <a class="el" href="group__ham__data__access__modes.html">hamsterdb Data Access Mode Codes</a>. The DAM is not persistent. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or an invalid combination of flags was specified </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga9148169c84a2c5d2a918e8b52d4d7b96">HAM_DATABASE_NOT_FOUND</a> if a Database with this <em>name</em> does not exist in this Environment. </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga2d404705921dd4e70c975cab78db8304">HAM_DATABASE_ALREADY_OPEN</a> if this Database was already opened </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gae88e8c20500172e207af4dab2f73a189">HAM_OUT_OF_MEMORY</a> if memory could not be allocated </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga2d404705921dd4e70c975cab78db8304">HAM_DATABASE_ALREADY_OPEN</a> if <em>db</em> is already in use </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00689">ham::env::open_db()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4dbe3a84324f142a7c2344c33314d9b5"></a><!-- doxytag: member="hamsterdb.h::ham_env_open_ex" ref="ga4dbe3a84324f142a7c2344c33314d9b5" args="(ham_env_t *env, const char *filename, ham_u32_t flags, const ham_parameter_t *param)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> HAM_CALLCONV ham_env_open_ex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> *&nbsp;</td>
          <td class="paramname"> <em>param</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Opens an existing Database Environment - extended version</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>A valid Environment handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>The filename of the Environment file </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Optional flags for opening the Environment, combined with bitwise OR. Possible flags are: </p>
<ul>
<li>
<a class="el" href="group__ham__database.html#ga4bbf0348ca6aa664c231e2873563ff57">HAM_READ_ONLY</a>  Opens the file for reading only. Operations that need write access (i.e. <a class="el" href="group__ham__database.html#ga5bb99ca3c41f069db310123253c1c1fb">ham_insert</a>) will return <a class="el" href="group__ham__status__codes.html#gaa9b7718efa69b6f34d64040f6e711743">HAM_DB_READ_ONLY</a> </li>
<li>
<a class="el" href="group__ham__database.html#ga02a9ac9a6dc9f157a6fd32d93a8c022a">HAM_WRITE_THROUGH</a>  Immediately write modified pages to the disk. This slows down all Database operations, but could save the Database integrity in case of a system crash. </li>
<li>
<a class="el" href="group__ham__database.html#ga5413f94fa215309f094dc8ce04f2cab0">HAM_DISABLE_MMAP</a>  Do not use memory mapped files for I/O. By default, hamsterdb checks if it can use mmap, since mmap is faster than read/write. For performance reasons, this flag should not be used. </li>
<li>
<a class="el" href="group__ham__database.html#gad7afc7436143de8387514161748e1d90">HAM_CACHE_STRICT</a>  Do not allow the cache to grow larger than <em>cachesize</em>. If a Database operation needs to resize the cache, it will return <a class="el" href="group__ham__status__codes.html#ga8e8c61042670c891fbe7d169d4011d11">HAM_CACHE_FULL</a>. If the flag is not set, the cache is allowed to allocate more pages than the maximum cache size, but only if it's necessary and only for a short time. </li>
<li>
<a class="el" href="group__ham__database.html#ga15097f5df4e9671792fb65eac9d05b70">HAM_CACHE_UNLIMITED</a>  Do not limit the cache. Nearly as fast as an In-Memory Database. Not allowed in combination with <a class="el" href="group__ham__database.html#gad7afc7436143de8387514161748e1d90">HAM_CACHE_STRICT</a> or a limited cache size. </li>
<li>
<a class="el" href="group__ham__database.html#gac4e2c3cc0682d194cb3053627cb6e31e">HAM_DISABLE_FREELIST_FLUSH</a>  This flag is deprecated. </li>
<li>
<a class="el" href="group__ham__database.html#ga5fa27327c0bac4ae8c6f9a604d2dfa67">HAM_LOCK_EXCLUSIVE</a>  Place an exclusive lock on the file. Only one process may hold an exclusive lock for a given file at a given time. Deprecated - this is now the default </li>
<li>
<a class="el" href="group__ham__database.html#ga6ed0878fb06aad97e7c76f23c687d528">HAM_ENABLE_RECOVERY</a>  Enables logging/recovery for this Database. Will return <a class="el" href="group__ham__status__codes.html#ga4b42acf0c22724118d91c82157fd3a48">HAM_NEED_RECOVERY</a>, if the Database is in an inconsistent state. Not allowed in combination with <a class="el" href="group__ham__database.html#gad62bc11ae5fad7a657a99c6eb743a6c1">HAM_IN_MEMORY_DB</a>, <a class="el" href="group__ham__database.html#gac4e2c3cc0682d194cb3053627cb6e31e">HAM_DISABLE_FREELIST_FLUSH</a> and <a class="el" href="group__ham__database.html#ga02a9ac9a6dc9f157a6fd32d93a8c022a">HAM_WRITE_THROUGH</a>. </li>
<li>
<a class="el" href="group__ham__database.html#ga20820df26239bd5c40ebdbe91184ee46">HAM_AUTO_RECOVERY</a>  Automatically recover the Database, if necessary. This flag implies <a class="el" href="group__ham__database.html#ga6ed0878fb06aad97e7c76f23c687d528">HAM_ENABLE_RECOVERY</a>. </li>
<li>
<a class="el" href="group__ham__database.html#ga39f7e995afb8789c05241102d3948a12">HAM_ENABLE_TRANSACTIONS</a>  Enables Transactions for this Database. <b>Remark</b> Transactions were introduced in hamsterdb 1.0.4, but with certain limitations (which will be removed in later version). Please read the README file and the Release Notes for details.<br/>
 This flag imples <a class="el" href="group__ham__database.html#ga6ed0878fb06aad97e7c76f23c687d528">HAM_ENABLE_RECOVERY</a>. </li>
</ul>
</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>param</em>&nbsp;</td><td>An array of <a class="el" href="structham__parameter__t.html">ham_parameter_t</a> structures. The following parameters are available: </p>
<ul>
<li>
<a class="el" href="group__ham__database.html#ga8d411f911a34c85d5db211d0e2e3bca9">HAM_PARAM_CACHESIZE</a>  The size of the Database cache, in bytes. The default size is defined in src/config.h as <em>HAM_DEFAULT_CACHESIZE</em> - usually 2MB </li>
<li>
<a class="el" href="group__ham__database.html#gac06e57831c21af6110a04e8d9d7bd167">HAM_PARAM_DATA_ACCESS_MODE</a>  Gives a hint regarding data access patterns. The default setting optimizes hamsterdb for random read/write access (<a class="el" href="group__ham__data__access__modes.html#ga14500a3f83a689110ec9e3e719b5b37f">HAM_DAM_RANDOM_WRITE</a>). Use <a class="el" href="group__ham__data__access__modes.html#gad759a1d13a46f8297e4f868ac85eb02c">HAM_DAM_SEQUENTIAL_INSERT</a> for sequential inserts (this is automatically set for record number Databases). Data Access Mode hints can be set for individual Databases, too (see also <a class="el" href="group__ham__database.html#ga24245a31681e5987a0d71c04ff953ea3">ham_create_ex</a>) but are applied globally to all Databases within a single Environment. For more information about available DAM (Data Access Mode) flags, see <a class="el" href="group__ham__data__access__modes.html">hamsterdb Data Access Mode Codes</a>. The DAM is not persistent. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success. </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if the <em>env</em> pointer is NULL, an invalid combination of flags was specified </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga101453daaf4f6ed5de0bedec7bb490a0">HAM_FILE_NOT_FOUND</a> if the file does not exist </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gab3c1003cb681477b768c00d93e51a398">HAM_IO_ERROR</a> if the file could not be opened or reading failed </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gac29fff6dc372d4df81aa6d954fa8003f">HAM_INV_FILE_VERSION</a> if the Environment version is not compatible with the library version. </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gae88e8c20500172e207af4dab2f73a189">HAM_OUT_OF_MEMORY</a> if memory could not be allocated </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga8cc1290a674002e12458e354ecd1ffc9">HAM_WOULD_BLOCK</a> if another process has locked the file </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga4b42acf0c22724118d91c82157fd3a48">HAM_NEED_RECOVERY</a> if the Database is in an inconsistent state </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gad10560c46fe5e1e5c478b24d7e6e3aec">HAM_LOG_INV_FILE_HEADER</a> if the logfile is corrupt </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga85b6e006baaff5a5e333d519408c04da">HAM_ENVIRONMENT_ALREADY_OPEN</a> if <em>env</em> is already in use </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00657">ham::env::open()</a>.</p>

</div>
</div>
<a class="anchor" id="ga07a3749e3dfa88138c3056e5052bb96a"></a><!-- doxytag: member="hamsterdb.h::ham_env_rename_db" ref="ga07a3749e3dfa88138c3056e5052bb96a" args="(ham_env_t *env, ham_u16_t oldname, ham_u16_t newname, ham_u32_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HAM_EXPORT <a class="el" href="types_8h.html#a6855e1803e688775e92cd64b2a6d1064">ham_status_t</a> HAM_CALLCONV ham_env_rename_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hamsterdb_8h.html#a76a9536ed7a9615d8ebc02b02092a82b">ham_env_t</a> *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5364c7dfd0c5508a81ad68f6e6eeac2c">ham_u16_t</a>&nbsp;</td>
          <td class="paramname"> <em>oldname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5364c7dfd0c5508a81ad68f6e6eeac2c">ham_u16_t</a>&nbsp;</td>
          <td class="paramname"> <em>newname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a5e6a004203fd1dcb8d512216bad086bd">ham_u32_t</a>&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Renames a Database in an Environment.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>env</em>&nbsp;</td><td>A valid Environment handle. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>oldname</em>&nbsp;</td><td>The old name of the existing Database. If a Database with this name does not exist, the function will fail with <a class="el" href="group__ham__status__codes.html#ga9148169c84a2c5d2a918e8b52d4d7b96">HAM_DATABASE_NOT_FOUND</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>newname</em>&nbsp;</td><td>The new name of this Database. If a Database with this name already exists, the function will fail with <a class="el" href="group__ham__status__codes.html#ga9b8f81eb7c034b2206753a7063e48032">HAM_DATABASE_ALREADY_EXISTS</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Optional flags for renaming the Database, combined with bitwise OR; unused, set to 0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="group__ham__status__codes.html#ga996267ce00baef28c04eecdcb2241bf3">HAM_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga86278fac7e593aab73ee5da21ec02435">HAM_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or if the new Database name is reserved </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga9148169c84a2c5d2a918e8b52d4d7b96">HAM_DATABASE_NOT_FOUND</a> if a Database with this <em>name</em> does not exist in this Environment </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga9b8f81eb7c034b2206753a7063e48032">HAM_DATABASE_ALREADY_EXISTS</a> if a Database with the new name already exists </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#gae88e8c20500172e207af4dab2f73a189">HAM_OUT_OF_MEMORY</a> if memory could not be allocated </dd>
<dd>
<a class="el" href="group__ham__status__codes.html#ga01ac56dcfd300fb45c0337e42ab0cb28">HAM_NOT_READY</a> if the Environment <em>env</em> was not initialized correctly (i.e. not yet opened or created) </dd></dl>

<p>Referenced by <a class="el" href="hamsterdb_8hpp_source.html#l00707">ham::env::rename_db()</a>.</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Apr 14 20:37:56 2010 for hamsterdb Embedded Database by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
